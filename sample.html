<!DOCTYPE html>

<html>
<head>

	<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
	<script>

		if(localStorage.twitterSearch) {

			var twitterData = JSON.parse(localStorage.twitterSearch);
			var formattedData = [];

			$.each(twitterData.results, function(index, tweet){

				var text=tweet.text;
							
				// if a URL is present, wrap it in an <a> tag
				// -- stuff like "url.url" and "url.expanded_url" refers to keys that call values from the Twitter JSON object
				if(tweet.entities.urls){
					$.each(tweet.entities.urls, function(index, url){
						text=text.replace(url.url, '<a href="' + url.expanded_url + '">' + url.display_url + '</a>');
					})
				}

				formattedData.push({
					text: tweet.text,
					from_user_name: tweet.from_user_name
				});

			});

			localStorage.formattedData = JSON.stringify(formattedData);

			console.log('hooray');

		} else {
		
			$.ajax({
			
				url: 'http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed',
						
				dataType:'jsonp',

				success:function(response){

					localStorage.twitterSearch = JSON.stringify(response);
					console.log('I think that worked.');
				
				},

				error: function(){
					alert('Error, error: does not compute.');
				}
			
			})


		}


	</script>

</head>
<body>
	<div id

</body>
</html>